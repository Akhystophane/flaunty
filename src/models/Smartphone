/*
Auto-generated by: https://github.com/pmndrs/gltfjsx
*/
import React, { useRef, useEffect } from 'react';
import { useFrame, useThree } from '@react-three/fiber';

import { useGLTF, useAnimations } from '@react-three/drei'
import SmartphoneModel from '../assets/3d/smartphone.glb'


export function Smartphone({progress,domRef, ...props}) {
  const group = useRef();
  const { nodes, materials, animations } = useGLTF(SmartphoneModel)
  const { actions } = useAnimations(animations, group)
  const { size } = useThree(); // DÃ©placez useThree en dehors de useFrame


  useFrame(() => {
    if (domRef.current) {
      const rect = domRef.current.getBoundingClientRect();
      //console.log([group.current.position.x, group.current.position.y, group.current.position.z]);
      const { width, height } = size;
      const x = (rect.left / window.innerWidth) * 2 - 1;
      const y = -(rect.top / window.innerHeight) * 2 + 1;
      console.log(group.current.position)
      //group.current.position.z += x ;
      //group.current.position.y = y * height/2;
    }
  });
  

  useEffect(() => {
        if (actions) {
        const actionNames = Object.keys(actions);
        if (actionNames.length > 0) {
            const action = actions[actionNames[0]];
    /*             action.clampWhenFinished  = true; */
            //action.play();
        }
        }
    }, [progress, actions]);

    useEffect(() => {
        if (actions) {
            const actionNames = Object.keys(actions);
            if (actionNames.length > 0) {
            const action = actions[actionNames[0]];
            
                if (progress <= 100) {
                action.paused = false;  
                const duration = action.getClip().duration;
                const time = (progress / 100) * duration;
                
                action.time = time;
                action.play();
                action.paused = true;
                }
        }
        }
    },[progress, actions] );
  return (
    
    <group ref={group} {...props} scale={size.width/200-size.width/350} rotation={[0,-1.55,0]} position={[1, -2.3, -size.width/650]}>
      <group name="Scene">
        <group name="iphone" position={[0, 2.381, 0]} rotation={[-Math.PI / 2, 0, 0]} scale={7.476}>
          <group name="USDRoot" rotation={[Math.PI / 2, 0, 0]} scale={0.01}>
            <group name="tracking_node_placeholder">
              <group name="PinkGkyfWkwvZoW">
                <group name="CZdojDQNgDREeKv">
                  <group name="fkgonDdxriZpnWK">
                    <mesh
                      name="AbxQOpRbGREHXRG"
                      castShadow
                      receiveShadow
                      geometry={nodes.AbxQOpRbGREHXRG.geometry}
                      material={materials.IDdMwJVCyuFpUnA}
                    />
                    <mesh
                      name="alSOKOYgFKIcUtR"
                      castShadow
                      receiveShadow
                      geometry={nodes.alSOKOYgFKIcUtR.geometry}
                      material={materials.sWxYOtHGWTcXRMx}
                    />
                    <mesh
                      name="FjhETOCBEeiBmch"
                      castShadow
                      receiveShadow
                      geometry={nodes.FjhETOCBEeiBmch.geometry}
                      material={materials.KtvhjlxyToKjYkE}
                    />
                    <mesh
                      name="lxsKwuOPNvmzBKg_0"
                      castShadow
                      receiveShadow
                      geometry={nodes.lxsKwuOPNvmzBKg_0.geometry}
                      material={materials.KhJiSWFcsscOusf}
                    />
                    <mesh
                      name="tWfjYtMZCfucxRt"
                      castShadow
                      receiveShadow
                      geometry={nodes.tWfjYtMZCfucxRt.geometry}
                      material={materials.fdfRsQCrfvPBPfQ}
                    />
                  </group>
                </group>
                <group name="MgzlnvdhvdPmvVz">
                  <mesh
                    name="aYjPeBrpBRopJbp"
                    castShadow
                    receiveShadow
                    geometry={nodes.aYjPeBrpBRopJbp.geometry}
                    material={materials.xHgtbqndQshkTKG}
                  />
                  <mesh
                    name="BeQtuLXtpSTrzAH"
                    castShadow
                    receiveShadow
                    geometry={nodes.BeQtuLXtpSTrzAH.geometry}
                    material={materials.initialShadingGroup}
                  />
                  <group name="jfrkeZkELiVCUCj">
                    <mesh
                      name="BDLCJBydsNjizog_0"
                      castShadow
                      receiveShadow
                      geometry={nodes.BDLCJBydsNjizog_0.geometry}
                      material={materials.fGwijctGaiRaYJC}
                    />
                    <mesh
                      name="GWEiavWnRxbogtw_0"
                      castShadow
                      receiveShadow
                      geometry={nodes.GWEiavWnRxbogtw_0.geometry}
                      material={materials.FsunUcGyajFpQmW}
                    />
                    <mesh
                      name="JUTNJcWwqyxbGDZ_0"
                      castShadow
                      receiveShadow
                      geometry={nodes.JUTNJcWwqyxbGDZ_0.geometry}
                      material={materials.LJBezuBxKRoHnAp}
                    />
                    <mesh
                      name="PLFTnNQeqVAxicS"
                      castShadow
                      receiveShadow
                      geometry={nodes.PLFTnNQeqVAxicS.geometry}
                      material={materials.BLpVAsLWNICZYGG}
                    />
                    <mesh
                      name="RFqaqXLpuCDBIGV_0"
                      castShadow
                      receiveShadow
                      geometry={nodes.RFqaqXLpuCDBIGV_0.geometry}
                      material={materials.nJRBoEsOhzMSqCz}
                    />
                    <mesh
                      name="tWBbDznHihIxXam"
                      castShadow
                      receiveShadow
                      geometry={nodes.tWBbDznHihIxXam.geometry}
                      material={materials.OStzgRHtVBLWwiD}
                    />
                  </group>
                  <mesh
                    name="KUDomTaVduCyevu"
                    castShadow
                    receiveShadow
                    geometry={nodes.KUDomTaVduCyevu.geometry}
                    material={materials.KtvhjlxyToKjYkE}
                  />
                  <mesh
                    name="QaGkMzxNzKPcqRy"
                    castShadow
                    receiveShadow
                    geometry={nodes.QaGkMzxNzKPcqRy.geometry}
                    material={materials.iEhZxWeNLTDdgxm}
                  />
                  <mesh
                    name="QOfJIBEXOvXfSUh"
                    castShadow
                    receiveShadow
                    geometry={nodes.QOfJIBEXOvXfSUh.geometry}
                    material={materials.vsSJQngPxBJTVZb}
                  />
                  <group name="VKOyrvtwIfmqQxa">
                    <mesh
                      name="aVmapfDgqkPkjUf"
                      castShadow
                      receiveShadow
                      geometry={nodes.aVmapfDgqkPkjUf.geometry}
                      material={materials.WqbAhnIPgrrhfXS}
                    />
                    <mesh
                      name="CAQeTxdpUcbxQyT"
                      castShadow
                      receiveShadow
                      geometry={nodes.CAQeTxdpUcbxQyT.geometry}
                      material={materials.KtvhjlxyToKjYkE}
                    />
                    <mesh
                      name="qsTxqfACkdoWeLQ"
                      castShadow
                      receiveShadow
                      geometry={nodes.qsTxqfACkdoWeLQ.geometry}
                      material={materials.IBtgGxCVyZhjKZM}
                    />
                    <mesh
                      name="tQCDizUpBYNcvFA"
                      castShadow
                      receiveShadow
                      geometry={nodes.tQCDizUpBYNcvFA.geometry}
                      material={materials.LtesZnUOMbBEAoi}
                    />
                  </group>
                  <group name="WdanqYwxRyUXWJc">
                    <mesh
                      name="zPPSOvNamLQVyvv"
                      castShadow
                      receiveShadow
                      geometry={nodes.zPPSOvNamLQVyvv.geometry}
                      material={materials.qEGySvwsouNnVcn}
                    />
                  </group>
                  <group name="xjCPRgbYHLDauvS">
                    <mesh
                      name="MoTJNOoMxqdxNvQ"
                      castShadow
                      receiveShadow
                      geometry={nodes.MoTJNOoMxqdxNvQ.geometry}
                      material={materials.IBtgGxCVyZhjKZM}
                    />
                    <group name="mZxrNiCtMrMjOMv">
                      <mesh
                        name="mZxrNiCtMrMjOMv_1"
                        castShadow
                        receiveShadow
                        geometry={nodes.mZxrNiCtMrMjOMv_1.geometry}
                        material={materials.WqbAhnIPgrrhfXS}
                      />
                      <mesh
                        name="mZxrNiCtMrMjOMv_2"
                        castShadow
                        receiveShadow
                        geometry={nodes.mZxrNiCtMrMjOMv_2.geometry}
                        material={materials.CSNzlRnZuvCyxNL}
                      />
                      <mesh
                        name="mZxrNiCtMrMjOMv_3"
                        castShadow
                        receiveShadow
                        geometry={nodes.mZxrNiCtMrMjOMv_3.geometry}
                        material={materials.GFNYbWjyDVGUwJd}
                      />
                      <mesh
                        name="mZxrNiCtMrMjOMv_4"
                        castShadow
                        receiveShadow
                        geometry={nodes.mZxrNiCtMrMjOMv_4.geometry}
                        material={materials.tfbCjiZQaZkmtHx}
                      />
                      <mesh
                        name="mZxrNiCtMrMjOMv_5"
                        castShadow
                        receiveShadow
                        geometry={nodes.mZxrNiCtMrMjOMv_5.geometry}
                        material={materials.jFPFAvCbiqflbQV}
                      />
                      <mesh
                        name="mZxrNiCtMrMjOMv_6"
                        castShadow
                        receiveShadow
                        geometry={nodes.mZxrNiCtMrMjOMv_6.geometry}
                        material={materials.rNCplyWedyfORFh}
                      />
                      <mesh
                        name="mZxrNiCtMrMjOMv_7"
                        castShadow
                        receiveShadow
                        geometry={nodes.mZxrNiCtMrMjOMv_7.geometry}
                        material={materials.YiceMpFVTpnmoaq}
                      />
                      <mesh
                        name="mZxrNiCtMrMjOMv_8"
                        castShadow
                        receiveShadow
                        geometry={nodes.mZxrNiCtMrMjOMv_8.geometry}
                        material={materials.LtesZnUOMbBEAoi}
                      />
                      <mesh
                        name="mZxrNiCtMrMjOMv_9"
                        castShadow
                        receiveShadow
                        geometry={nodes.mZxrNiCtMrMjOMv_9.geometry}
                        material={materials.EJpkIDZfhPDUzel}
                      />
                      <mesh
                        name="mZxrNiCtMrMjOMv_10"
                        castShadow
                        receiveShadow
                        geometry={nodes.mZxrNiCtMrMjOMv_10.geometry}
                        material={materials.LUbRMhkIhuekQRK}
                      />
                      <mesh
                        name="mZxrNiCtMrMjOMv_11"
                        castShadow
                        receiveShadow
                        geometry={nodes.mZxrNiCtMrMjOMv_11.geometry}
                        material={materials.LJBezuBxKRoHnAp}
                      />
                    </group>
                    <mesh
                      name="YPGjoywokSeoQFr"
                      castShadow
                      receiveShadow
                      geometry={nodes.YPGjoywokSeoQFr.geometry}
                      material={materials.KtvhjlxyToKjYkE}
                    />
                  </group>
                </group>
                <group name="QBOwHSPSxgSiwBJ">
                  <group name="DmsxnfPLBxzvUzb">
                    <mesh
                      name="IuMgFUHIyRWENxG_0"
                      castShadow
                      receiveShadow
                      geometry={nodes.IuMgFUHIyRWENxG_0.geometry}
                      material={materials.LcWBQfBvCzxThpp}
                    />
                    <mesh
                      name="nJYGEbPQybRBbiN"
                      castShadow
                      receiveShadow
                      geometry={nodes.nJYGEbPQybRBbiN.geometry}
                      material={materials.tDZQoaroJfCIQtF}
                    />
                    <mesh
                      name="RGbIswEcCTzqNsn_0"
                      castShadow
                      receiveShadow
                      geometry={nodes.RGbIswEcCTzqNsn_0.geometry}
                      material={materials.FlDKBWPodPcEeGy}
                    />
                    <mesh
                      name="XeFHhVBtRZWPGxR"
                      castShadow
                      receiveShadow
                      geometry={nodes.XeFHhVBtRZWPGxR.geometry}
                      material={materials.tfbCjiZQaZkmtHx}
                    />
                  </group>
                  <group name="hvHkgOsBqZjfnRJ">
                    <mesh
                      name="JyAbjubWrOdfygC_0"
                      castShadow
                      receiveShadow
                      geometry={nodes.JyAbjubWrOdfygC_0.geometry}
                      material={materials.jFPFAvCbiqflbQV}
                    />
                    <mesh
                      name="nxFoHsySvfcSLvp"
                      castShadow
                      receiveShadow
                      geometry={nodes.nxFoHsySvfcSLvp.geometry}
                      material={materials.KtvhjlxyToKjYkE}
                    />
                    <mesh
                      name="oCklTGvTZoDWJrC_0"
                      castShadow
                      receiveShadow
                      geometry={nodes.oCklTGvTZoDWJrC_0.geometry}
                      material={materials.tfbCjiZQaZkmtHx}
                    />
                  </group>
                  <group name="PBOTXpSeOPsBhmZ">
                    <mesh
                      name="DLfIUIalXuQjJsL"
                      castShadow
                      receiveShadow
                      geometry={nodes.DLfIUIalXuQjJsL.geometry}
                      material={materials.pBMikDFQfUOsKkr}
                    />
                    <mesh
                      name="FaUtifOQSMTXiZM"
                      castShadow
                      receiveShadow
                      geometry={nodes.FaUtifOQSMTXiZM.geometry}
                      material={materials.KtvhjlxyToKjYkE}
                    />
                    <mesh
                      name="FGDSbHbILfUmiaH"
                      castShadow
                      receiveShadow
                      geometry={nodes.FGDSbHbILfUmiaH.geometry}
                      material={materials.tfbCjiZQaZkmtHx}
                    />
                    <mesh
                      name="jQXfQpudiYObSGp"
                      castShadow
                      receiveShadow
                      geometry={nodes.jQXfQpudiYObSGp.geometry}
                      material={materials.sWxYOtHGWTcXRMx}
                    />
                    <mesh
                      name="KABLQLZRuEbcLWk"
                      castShadow
                      receiveShadow
                      geometry={nodes.KABLQLZRuEbcLWk.geometry}
                      material={materials.fdfRsQCrfvPBPfQ}
                    />
                    <mesh
                      name="knexoFNknstHgiO"
                      castShadow
                      receiveShadow
                      geometry={nodes.knexoFNknstHgiO.geometry}
                      material={materials.KtvhjlxyToKjYkE}
                    />
                    <mesh
                      name="OMkeKbwVHRBkBwM"
                      castShadow
                      receiveShadow
                      geometry={nodes.OMkeKbwVHRBkBwM.geometry}
                      material={materials.IkWzRHNnDaKQXIi}
                    />
                    <mesh
                      name="qjXEDwnnBYwWcJn"
                      castShadow
                      receiveShadow
                      geometry={nodes.qjXEDwnnBYwWcJn.geometry}
                      material={materials.tfbCjiZQaZkmtHx}
                    />
                  </group>
                  <mesh
                    name="vauUojKrKkLLDtY"
                    castShadow
                    receiveShadow
                    geometry={nodes.vauUojKrKkLLDtY.geometry}
                    material={materials.HvAGJeQTAiWbceX}
                  />
                  <mesh
                    name="wjSYkRykuFHJNPw"
                    castShadow
                    receiveShadow
                    geometry={nodes.wjSYkRykuFHJNPw.geometry}
                    material={materials.KxzouvBYEgdZhMo}
                  />
                  <mesh
                    name="yqmgDmvGsmuPwXx_0"
                    castShadow
                    receiveShadow
                    geometry={nodes.yqmgDmvGsmuPwXx_0.geometry}
                    material={materials.bmOZLlCkCKhIIVe}
                  />
                </group>
                <mesh
                  name="UCttAeyROPsgmix"
                  castShadow
                  receiveShadow
                  geometry={nodes.UCttAeyROPsgmix.geometry}
                  material={materials.KtvhjlxyToKjYkE}
                />
              </group>
            </group>
          </group>
        </group>
        <mesh
          name="disapointed_emoji"
          castShadow
          receiveShadow
          geometry={nodes.disapointed_emoji.geometry}
          material={materials.M_Emoticon_56}
          position={[-0.258, 3.077, -0.233]}
          rotation={[-1.199, 0.046, -3.105]}
          scale={0.03}
        />
        <group
          name="glasses_emoji"
          position={[0.035, 2.902, -0.377]}
          rotation={[-1.534, 0.012, -3.116]}
          scale={1.428}>
          <group name="Orange_Manfbx" rotation={[Math.PI / 2, 0, 0]} scale={0.01}>
            <group name="RootNode">
              <group name="Orange">
                <mesh
                  name="Orange_Atlas_Orange_0"
                  castShadow
                  receiveShadow
                  geometry={nodes.Orange_Atlas_Orange_0.geometry}
                  material={materials.Atlas_Orange}
                  position={[0.315, 0.903, 0.506]}
                  scale={1.428}
                />
              </group>
            </group>
          </group>
        </group>
        <group name="angry_emoji" rotation={[-Math.PI / 2, 0, 0]} scale={0.12}>
          <group name="root">
            <group name="GLTF_SceneRootNode" rotation={[Math.PI / 2, 0, 0]}>
              <group name="Sphere_Sphere001_0" rotation={[Math.PI / 2, 0, 0]}>
                <mesh
                  name="Object_4"
                  castShadow
                  receiveShadow
                  geometry={nodes.Object_4.geometry}
                  material={materials['Material.002']}
                  position={[4.546, -1.157, -26.179]}
                  rotation={[0.144, -0.017, -3.052]}
                />
              </group>
            </group>
          </group>
        </group>
        <group name="rolling_eyes_emoji" rotation={[-Math.PI / 2, 0, 2.841]} scale={0.055}>
          <group
            name="7b8c617c9295447196e2ce465da0169afbx"
            rotation={[Math.PI / 2, 0, 0]}
            scale={0.01}>
            <group name="RootNode001">
              <group name="Emoticon_48" rotation={[-Math.PI / 2, 0, 0]} scale={100}>
                <mesh
                  name="Emoticon_48_M_Emoticon_48_0"
                  castShadow
                  receiveShadow
                  geometry={nodes.Emoticon_48_M_Emoticon_48_0.geometry}
                  material={materials.M_Emoticon_48}
                  position={[-6.077, 4.346, 55.343]}
                  rotation={[0.44, 0.207, -0.548]}
                  scale={0.5}
                />
              </group>
            </group>
          </group>
        </group>
        <group name="no_emotion_emoji" rotation={[-Math.PI / 2, 0, -3.103]} scale={0.064}>
          <group
            name="2292d0505b39477ea1165952371d5cf6fbx"
            rotation={[Math.PI / 2, 0, 0]}
            scale={0.01}>
            <group name="RootNode002">
              <group name="Emoticon_40" rotation={[-Math.PI / 2, 0, 0]} scale={100}>
                <mesh
                  name="no_emotion_emoji_"
                  castShadow
                  receiveShadow
                  geometry={nodes.no_emotion_emoji_.geometry}
                  material={materials.M_Emoticon_40}
                  position={[6.877, 3.492, 49.272]}
                  rotation={[-0.04, -0.067, 0.258]}
                  scale={0.38}
                />
              </group>
            </group>
          </group>
        </group>
        <group name="poo_emoji" rotation={[-Math.PI / 2, 0, 0]} scale={0.134}>
          <group name="USDRoot001" rotation={[Math.PI / 2, 0, 0]} scale={0.01}>
            <group name="Root">
              <group name="poo_emoji_1" position={[0, 93.04, 0]}>
                <mesh
                  name="poo_emoji001"
                  castShadow
                  receiveShadow
                  geometry={nodes.poo_emoji001.geometry}
                  material={materials.material}
                  position={[-573.486, 1984.21, 48.578]}
                  rotation={[3.132, -0.063, -3.101]}
                />
              </group>
            </group>
          </group>
        </group>
      </group>
    </group>
  )
}
export default Smartphone
